version: '3.3'
services:
  web:
    build:
      context: .
      dockerfile: ./docker/Dockerfile
    ports:
      - "127.0.0.1:8080:8080"
    volumes:
      - .:/go/src/gonews
      - gonews_data_dev:/data
    environment:
      GONEWS_DEBUG: "true"
    entrypoint: "bash"
    stdin_open: true
    tty: true
  # mysql:
  #   image: mysql
  #   restart: always
  #   environment:
  #     MYSQL_ROOT_PASSWORD_FILE: /run/secrets/gonews_dev_mysql_root_pass
  #   secrets:
  #     - gonews_dev_mysql_root_pass
# secrets:
#   gonews_dev_mysql_root_pass:
#     external: true
volumes:
  gonews_data_dev: {}
